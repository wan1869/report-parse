webpackJsonp([2],{"E+Et":function(e,t){},eeoQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"RegPlan",data:function(){return{searchValue:{id:null,method:null,status:null,createDT:null},title:"",showAdvanceSearchView:!1,rps:[],loading:!1,popVisible:!1,popVisible2:!1,dialogVisible:!1,total:0,page:1,keyword:"",size:10,statusoptions:[{value:"1",label:"请求完成"},{value:"2",label:"排队中"}],methodoptions:[{value:"getPatientInfo",label:"花名册接口"},{value:"getRegisterPlan",label:"预约计划接口"},{value:"trackingStatus",label:"状态跟踪"}],rp:{id:"",method:"",status:"",request:"",response:"",createDT:"",updateDT:""},defaultProps:{children:"children",label:"name"},rules:{method:[{required:!0,message:"请输入接口名称",trigger:"blur"}],request:[{required:!0,message:"请输入请求参数",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},mounted:function(){this.initRPs()},methods:{exportData:function(){window.open("/rp/basic/export","_parent")},emptyRP:function(){this.rp={id:"",method:"",status:"",request:"",response:"",createDT:null,updateDT:null}},emptySearch:function(){this.searchValue={id:"",method:"",status:"",request:"",response:"",createDT:null,updateDT:null}},showEditRPView:function(e){this.title="编辑接口请求信息",this.rp=e,this.dialogVisible=!0},deleteRP:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.method+"】接口的编号"+e.id+"的请求数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteRequest("/rp/basic/"+e.id).then(function(e){e&&t.initRPs()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},interfaceRP:function(e){var t=this;this.$confirm("此操作将向药联请求【"+e.method+"】接口, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.getRequest("/rp/basic/"+e.id).then(function(e){e&&t.$message({type:"info",message:"同步成功"})})}).catch(function(){t.$message({type:"info",message:"已取消同步"})})},sizeChange:function(e){this.size=e,this.initRPs()},doAddRP:function(){var e=this;this.rp.id?this.$refs.rpForm.validate(function(t){t&&e.putRequest("/rp/basic/",e.rp).then(function(t){t&&(e.dialogVisible=!1,e.initRPs())})}):this.$refs.rpForm.validate(function(t){t&&e.postRequest("/rp/basic/",e.rp).then(function(t){t&&(e.dialogVisible=!1,e.initRPs())})})},currentChange:function(e){this.page=e,this.initRPs("advanced")},showAddRPView:function(){this.emptyRP(),this.title="添加记录",this.dialogVisible=!0},initRPs:function(e){var t=this;this.loading=!0;var a="/rp/basic/?page="+this.page+"&size="+this.size;e&&"advanced"==e?(this.searchValue.id&&(a+="&id="+this.searchValue.id),this.searchValue.method&&(a+="&method="+this.searchValue.method),this.searchValue.status&&(a+="&status="+this.searchValue.status),this.searchValue.createDTScope&&(a+="&createDTScope="+this.searchValue.createDTScope)):a+="&method="+this.keyword,this.getRequest(a).then(function(e){t.loading=!1,e&&(t.rps=e.data,t.total=e.total)})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",[a("el-input",{staticStyle:{width:"350px","margin-right":"10px"},attrs:{placeholder:"请输入接口名称进行搜索，可以直接回车搜索...","prefix-icon":"el-icon-search",clearable:"",disabled:e.showAdvanceSearchView},on:{clear:e.initRPs},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.initRPs.apply(null,arguments)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),a("el-button",{attrs:{icon:"el-icon-search",type:"primary",disabled:e.showAdvanceSearchView},on:{click:e.initRPs}},[e._v("\n                        搜索\n                    ")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showAdvanceSearchView=!e.showAdvanceSearchView}}},[a("i",{class:e.showAdvanceSearchView?"fa fa-angle-double-up":"fa fa-angle-double-down",attrs:{"aria-hidden":"true"}}),e._v("\n                        高级搜索\n                    ")])],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"success",icon:"el-icon-download"},on:{click:e.exportData}},[e._v("\n                        导出数据\n                    ")]),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddRPView}},[e._v("\n                        新建请求\n                    ")])],1)]),e._v(" "),a("transition",{attrs:{name:"slide-fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showAdvanceSearchView,expression:"showAdvanceSearchView"}],staticStyle:{border:"1px solid #409eff","border-radius":"5px","box-sizing":"border-box",padding:"5px",margin:"10px 0px","font-size":"14px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[e._v("\n                        请求id:"),a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入接口请求ID"},model:{value:e.searchValue.id,callback:function(t){e.$set(e.searchValue,"id",t)},expression:"searchValue.id"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n                          接口名称:\n                          "),a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择接口",size:"mini"},model:{value:e.searchValue.method,callback:function(t){e.$set(e.searchValue,"method",t)},expression:"searchValue.method"}},e._l(e.methodoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n                          状态:\n                          "),a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择状态",size:"mini"},model:{value:e.searchValue.status,callback:function(t){e.$set(e.searchValue,"status",t)},expression:"searchValue.status"}},e._l(e.statusoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:10}},[e._v("\n                        创建日期:\n                        "),a("el-date-picker",{attrs:{type:"daterange",size:"mini","unlink-panels":"","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchValue.createDTScope,callback:function(t){e.$set(e.searchValue,"createDTScope",t)},expression:"searchValue.createDTScope"}})],1),e._v(" "),a("el-col",{attrs:{span:14}})],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:24}},[a("el-button",{attrs:{size:"mini"},on:{click:e.emptySearch}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:function(t){return e.initRPs("advanced")}}},[e._v("搜索")])],1)],1)],1)])],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.rps,stripe:"",border:"","element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",fixed:"",align:"left",label:"请求ID",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"method",label:"接口名称",align:"left",width:"85"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"left",width:"85"}}),e._v(" "),a("el-table-column",{attrs:{prop:"request",width:"600",align:"left",label:"请求参数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"response",width:"600",align:"left",label:"返回值"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDT",width:"95",align:"left",label:"创建日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateDT",width:"95",align:"left",label:"最后更新日期"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px"},attrs:{size:"mini"},on:{click:function(a){return e.showEditRPView(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px"},attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.interfaceRP(t.row)}}},[e._v("发送药联接口")]),e._v(" "),a("el-button",{staticStyle:{padding:"3px"},attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteRP(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{background:"",layout:"sizes, prev, pager, next, jumper, ->, total, slot",total:e.total},on:{"current-change":e.currentChange,"size-change":e.sizeChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"rpForm",attrs:{model:e.rp,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"接口:",prop:"method"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择接口",size:"mini"},model:{value:e.rp.method,callback:function(t){e.$set(e.rp,"method",t)},expression:"rp.method"}},e._l(e.methodoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"状态:",prop:"status"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择状态",size:"mini"},model:{value:e.rp.status,callback:function(t){e.$set(e.rp,"status",t)},expression:"rp.status"}},e._l(e.statusoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"请求参数:",prop:"request"}},[a("el-input",{staticStyle:{width:"90%"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入请求参数"},model:{value:e.rp.request,callback:function(t){e.$set(e.rp,"request",t)},expression:"rp.request"}})],1)],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.doAddRP}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var n=a("VU/8")(i,l,!1,function(e){a("E+Et")},null,null);t.default=n.exports},gW73:function(e,t,a){var i={"./RegPlan.vue":"eeoQ"};function l(e){return a(n(e))}function n(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}l.keys=function(){return Object.keys(i)},l.resolve=n,e.exports=l,l.id="gW73"}});
//# sourceMappingURL=2.ffabbdc0b4bbf2102921.js.map